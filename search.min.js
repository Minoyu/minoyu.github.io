(function(){function a(e,t){return t.lastIndex=0,t.test(e)}function e(e){var t=this.value.trim();if(t){var i=new RegExp(t.replace(/[ ]/g,"|"),"gmi");(function(t){if(n)t(n);else{var e=new XMLHttpRequest;e.open("GET",p,!0),e.onload=function(){if(200<=this.status&&this.status<300){var e=JSON.parse(this.response);n=e instanceof Array?e:e.posts,t(n)}else console.error(this.statusText)},e.onerror=function(){console.error(this.statusText)},e.send()}})(function(e){var t,n,s=e.filter(function(e){return n=i,a((t=e).title,n)||t.tags.some(function(e){return a(e.name,n)})||a(t.text,n);var t,n});n=(t=s).length?t.map(function(e){return t=f,n={title:e.title,path:(r.BLOG.ROOT+"/"+e.path).replace(/\/{2,}/g,"/"),date:new Date(e.date).toLocaleDateString(),tags:e.tags.map(function(e){return"<span>#"+e.name+"</span>"}).join("")},t.replace(/\{\w+\}/g,function(e){var t=e.replace(/\{|\}/g,"");return n[t]||""});var t,n}).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>',d.innerHTML=n,v.show()}),e.preventDefault()}}var n,r=window||this,t=r.BLOG.even,s=r.BLOG.$,i=s("#search"),o=s("#search-wrap"),c=s("#key"),l=s("#back"),u=s("#search-panel"),d=s("#search-result"),f=s("#search-tpl").innerHTML,p=(r.BLOG.ROOT+"/content.json").replace(/\/{2}/g,"/"),h=(r.BLOG.noop,s("html")),v={show:function(){r.innerWidth<760&&h.classList.add("lock-size"),u.classList.add("in")},hide:function(){r.innerWidth<760&&h.classList.remove("lock-size"),u.classList.remove("in")}};i.addEventListener(t,function(){o.classList.toggle("in"),c.value="",o.classList.contains("in")?c.focus():c.blur()}),l.addEventListener(t,function(){o.classList.remove("in"),v.hide()}),document.addEventListener(t,function(e){"key"!==e.target.id&&"click"===t&&v.hide()}),c.addEventListener("input",e),c.addEventListener(t,e)}).call(this);